#!/bin/sh
set -e

case "$1" in
  configure)
    # Ejecutable en PATH
    ln -sf /opt/beyondsqlexecutor/bin/BeyondSQLExecutor /usr/bin/beyondsqlexecutor

    # Desktop-id estable para GNOME (clave para anclar)
    DESKTOP_SRC="/opt/beyondsqlexecutor/lib/beyondsqlexecutor-BeyondSQLExecutor.desktop"
    DESKTOP_DST="/usr/share/applications/es-jklabs-BeyondSQLExecutor.desktop"

    if [ -f "$DESKTOP_SRC" ]; then
      install -D -m 0644 "$DESKTOP_SRC" "$DESKTOP_DST" || true
    fi

    command -v update-desktop-database >/dev/null 2>&1 && update-desktop-database -q || true
  ;;
esac

exit 0
